
<!doctype html>
<html lang="zh-TW" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="FinLab 模組架構與關係圖：視覺化說明資料層、策略層、回測層、交易層。了解各模組依賴關係與資料流向。">
      
      
      
        <link rel="canonical" href="https://doc.finlab.tw/architecture/module_relationships/">
      
      
        <link rel="prev" href="../../workflows/risk_management/">
      
      
        <link rel="next" href="../data_flow/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>模組架構圖 - FinLab 量化交易工具文檔</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/material.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="模組架構圖 - FinLab 量化交易工具文檔" />
<meta property="og:description" content="FinLab 模組架構與關係圖：視覺化說明資料層、策略層、回測層、交易層。了解各模組依賴關係與資料流向。" />
<meta property="og:image" content="https://doc.finlab.tw/assets/images/social/architecture/module_relationships.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://doc.finlab.tw/architecture/module_relationships/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="模組架構圖 - FinLab 量化交易工具文檔" />
<meta property="twitter:description" content="FinLab 模組架構與關係圖：視覺化說明資料層、策略層、回測層、交易層。了解各模組依賴關係與資料流向。" />
<meta property="twitter:image" content="https://doc.finlab.tw/assets/images/social/architecture/module_relationships.png" />
</head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#finlab" class="md-skip">
          跳轉到
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="頁首">
    <a href="https://ai.finlab.tw" title="FinLab 量化交易工具文檔" class="md-header__button md-logo" aria-label="FinLab 量化交易工具文檔" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FinLab 量化交易工具文檔
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              模組架構圖
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜尋" placeholder="搜尋" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="搜尋">
        
        <button type="reset" class="md-search__icon md-icon" title="清除" aria-label="清除" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜尋引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/finlab-python" title="前往倉庫" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="標籤" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  三分鐘上手

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../details/get_data/" class="md-tabs__link">
          
  
  
  簡易教學

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/finlab/" class="md-tabs__link">
          
  
  
  詳細功能

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../workflows/complete_strategy_workflow/" class="md-tabs__link">
          
  
  
  完整工作流程

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  架構與設計

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/guide_for_beginners/" class="md-tabs__link">
          
  
  
  實用範例

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../change-log/" class="md-tabs__link">
        
  
  
    
  
  更新日誌

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../faq/" class="md-tabs__link">
        
  
  
    
  
  常見問題 FAQ

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../glossary/" class="md-tabs__link">
        
  
  
    
  
  術語表

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://discord.gg/tAr4ysPqvR" class="md-tabs__link">
        
  
  
    
  
  社群助教

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://ai.finlab.tw/pricing" class="md-tabs__link">
        
  
  
    
  
  價格

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="導覽列" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ai.finlab.tw" title="FinLab 量化交易工具文檔" class="md-nav__button md-logo" aria-label="FinLab 量化交易工具文檔" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    FinLab 量化交易工具文檔
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/finlab-python" title="前往倉庫" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    三分鐘上手
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    簡易教學
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    簡易教學
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/get_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    數據
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/tech_ind/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    指標
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/backtest_decorator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    選股條件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/backtest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    歷史回測
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/factor_analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    因子分析
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/order_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    下單(單策略)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/order_api2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    下單(多策略)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/machine_learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    機器學習
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/finlab_plot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    資料視覺化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/optimize_strategy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    策略參數優化
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/analysis_modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    策略分析模組
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../details/market_customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    自訂市場物件
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    詳細功能
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    詳細功能
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/finlab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.data
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/dataframe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.dataframe
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/backtest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.backtest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/report/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.report
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/machine_learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.ml
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/portfolio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.portfolio
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/online/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.online
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/plot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.plot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/analysis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.analysis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/optimize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.optimize
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/market/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    finlab.market
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    完整工作流程
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    完整工作流程
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/complete_strategy_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    從研究到實盤
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/ml_strategy_workflow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    機器學習策略流程
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/multi_strategy_portfolio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    多策略組合管理
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workflows/risk_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    風險管理指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    架構與設計
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    架構與設計
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    模組架構圖
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    模組架構圖
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目錄">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目錄
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        整體架構圖
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        核心工作流程
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="核心工作流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 1: 基礎策略開發
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 2: 策略優化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 3: 機器學習策略
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 4: 實盤交易
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        模組功能對照表
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        資料流向圖
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        類別繼承關係
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="類別繼承關係">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#market" class="md-nav__link">
    <span class="md-ellipsis">
      
        Market 繼承樹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Analysis 繼承樹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finlabdataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        FinlabDataFrame 繼承關係
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        使用建議
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用建議">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        新手學習路徑
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        進階開發路徑
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        模組間的資料交換格式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="模組間的資料交換格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        主要資料格式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        訊號轉換流程
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        常見使用模式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="常見使用模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 1: 快速驗證策略構想
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 2: 完整策略開發
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 3: 機器學習策略
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 4: 多策略組合
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        效能優化建議
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="效能優化建議">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        資料存取
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        回測優化
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        參考資源
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="參考資源">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        詳細文檔
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        實用範例
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_flow/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    資料流程詳解
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extending_finlab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    擴充開發指南
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    實用範例
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    實用範例
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_1" >
        
          
          <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    台股
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    台股
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/guide_for_beginners/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    策略開發10分鐘上手
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/Pandas_%E7%AD%96%E7%95%A5%E9%96%8B%E7%99%BC%E5%9F%BA%E7%A4%8E%E8%AA%9E%E6%B3%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pandas 策略開發基礎語法
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E8%82%A1%E5%83%B9%E5%89%B5%E6%96%B0%E9%AB%98%E5%8B%95%E8%83%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    股價創新高動能
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E6%8A%80%E8%A1%93%E6%8C%87%E6%A8%99%E9%81%B8%E8%82%A1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    技術指標選股
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E4%B9%96%E9%9B%A2%E7%8E%87%E5%92%8C%E8%B2%A1%E5%A0%B1%E6%BF%BE%E7%B6%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    乖離率和財報濾網
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E6%9C%AC%E7%9B%8A%E6%88%90%E9%95%B7%E6%AF%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    本益成長比(月營收截止日換股)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E5%B0%8F%E8%B3%87%E6%97%8F%E5%84%AA%E7%AD%89%E7%94%9F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    小資族優等生
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E5%A4%9A%E7%A9%BA%E5%B0%8D%E6%B2%96/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    多空對沖
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E7%87%9F%E5%BB%BA%E7%94%A2%E6%A5%AD%E5%B0%88%E7%94%A8%E6%8C%87%E6%A8%99/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    營建產業專用指標
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E9%81%8E%E6%BF%BE%E5%85%A8%E9%A1%8D%E4%BA%A4%E5%89%B2%E8%82%A1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    過濾全額交割股
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E9%81%8E%E6%BF%BEKY%E8%82%A1%E8%B2%A1%E5%A0%B1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    過濾KY股財報
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/%E5%A4%A7%E7%9B%A4%E6%8C%87%E6%A8%99%E6%BF%BE%E7%B6%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    大盤指標濾網
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/2330_bband_rebound/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    台積電逆勢抄底
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/cheap-stock-ratio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    大跌底部判斷
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/important_info_search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    重訊公告搜尋 - 業外損失
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tools/ml_example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    機器學習範例策略
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../change-log/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    更新日誌
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    常見問題 FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    術語表
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://discord.gg/tAr4ysPqvR" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    社群助教
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://ai.finlab.tw/pricing" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    價格
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目錄">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目錄
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        整體架構圖
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        核心工作流程
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="核心工作流程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 1: 基礎策略開發
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 2: 策略優化
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 3: 機器學習策略
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    <span class="md-ellipsis">
      
        流程 4: 實盤交易
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        模組功能對照表
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        資料流向圖
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        類別繼承關係
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="類別繼承關係">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#market" class="md-nav__link">
    <span class="md-ellipsis">
      
        Market 繼承樹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#analysis" class="md-nav__link">
    <span class="md-ellipsis">
      
        Analysis 繼承樹
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#finlabdataframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        FinlabDataFrame 繼承關係
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        使用建議
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用建議">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        新手學習路徑
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        進階開發路徑
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        模組間的資料交換格式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="模組間的資料交換格式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        主要資料格式
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        訊號轉換流程
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        常見使用模式
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="常見使用模式">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 1: 快速驗證策略構想
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 2: 完整策略開發
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 3: 機器學習策略
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        模式 4: 多策略組合
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        效能優化建議
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="效能優化建議">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        資料存取
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        回測優化
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      
        參考資源
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="參考資源">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      
        詳細文檔
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      
        實用範例
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="finlab">FinLab 模組架構與關係圖</h1>
<p>本文透過視覺化圖表說明 FinLab 各模組的關係、資料流向、工作流程,幫助你快速理解系統架構。</p>
<hr />
<h2 id="_1">整體架構圖</h2>
<p>FinLab 採用分層架構,從底層的資料層到頂層的交易層:</p>
<pre class="mermaid"><code>graph TB
    subgraph "交易層 Trading Layer"
        portfolio[finlab.portfolio&lt;br/&gt;組合管理]
        online[finlab.online&lt;br/&gt;實盤交易]
    end

    subgraph "分析層 Analysis Layer"
        analysis[finlab.analysis&lt;br/&gt;策略分析]
        optimize[finlab.optimize&lt;br/&gt;參數優化]
        plot[finlab.plot&lt;br/&gt;資料視覺化]
    end

    subgraph "回測層 Backtest Layer"
        backtest[finlab.backtest&lt;br/&gt;回測引擎]
        report[finlab.report&lt;br/&gt;報告生成]
        market[finlab.market&lt;br/&gt;市場物件]
    end

    subgraph "策略層 Strategy Layer"
        ml_feature[finlab.ml.feature&lt;br/&gt;特徵工程]
        ml_label[finlab.ml.label&lt;br/&gt;標籤生成]
        ml_model[finlab.ml.qlib&lt;br/&gt;模型訓練]
    end

    subgraph "資料層 Data Layer"
        data[finlab.data&lt;br/&gt;資料存取]
        dataframe[finlab.dataframe&lt;br/&gt;FinlabDataFrame]
    end

    %% 資料流向
    data --&gt; dataframe
    dataframe --&gt; ml_feature
    dataframe --&gt; backtest
    ml_feature --&gt; ml_label
    ml_label --&gt; ml_model
    ml_model --&gt; backtest
    backtest --&gt; report
    report --&gt; analysis
    report --&gt; optimize
    analysis --&gt; portfolio
    optimize --&gt; backtest
    portfolio --&gt; online
    market --&gt; backtest
    dataframe --&gt; plot

    style data fill:#e1f5ff
    style backtest fill:#fff4e1
    style analysis fill:#e8f5e9
    style online fill:#fce4ec</code></pre>
<hr />
<h2 id="_2">核心工作流程</h2>
<h3 id="1">流程 1: 基礎策略開發</h3>
<p>從資料載入到報告生成的基本流程:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant User as 使用者
    participant Data as finlab.data
    participant DF as FinlabDataFrame
    participant Backtest as finlab.backtest
    participant Report as Report 物件

    User-&gt;&gt;Data: data.get('price:收盤價')
    Data--&gt;&gt;User: DataFrame
    User-&gt;&gt;DF: 計算指標 .average(20)
    DF--&gt;&gt;User: FinlabDataFrame
    User-&gt;&gt;DF: 產生訊號 close &gt; ma20
    DF--&gt;&gt;User: bool DataFrame
    User-&gt;&gt;Backtest: sim(position, resample='M')
    Backtest-&gt;&gt;Report: 建立 Report 物件
    Report--&gt;&gt;User: 回測結果
    User-&gt;&gt;Report: report.display()
    Report--&gt;&gt;User: 顯示績效圖表</code></pre>
<h3 id="2">流程 2: 策略優化</h3>
<p>使用 <code>sim_conditions()</code> 測試多個條件組合:</p>
<pre class="mermaid"><code>flowchart TD
    A[定義多個候選條件] --&gt; B[組合成 dict]
    B --&gt; C{使用 sim_conditions}
    C --&gt; D[生成所有組合&lt;br/&gt;2^n - 1 種]
    D --&gt; E[對每個組合執行回測]
    E --&gt; F[收集所有 Report]
    F --&gt; G[建立 ReportCollection]
    G --&gt; H{選擇視覺化方式}
    H --&gt;|熱力圖| I[plot_stats heatmap]
    H --&gt;|棒狀圖| J[plot_stats bar]
    H --&gt;|折線圖| K[plot_creturns]
    I --&gt; L[找出最佳組合]
    J --&gt; L
    K --&gt; L
    L --&gt; M[使用最佳組合重新回測]

    style C fill:#fff4e1
    style G fill:#e8f5e9
    style L fill:#fce4ec</code></pre>
<h3 id="3">流程 3: 機器學習策略</h3>
<p>完整的機器學習策略開發流程:</p>
<pre class="mermaid"><code>flowchart TD
    A[載入原始資料&lt;br/&gt;finlab.data] --&gt; B[特徵工程&lt;br/&gt;finlab.ml.feature]
    B --&gt; C[標籤生成&lt;br/&gt;finlab.ml.label]
    C --&gt; D[模型訓練&lt;br/&gt;finlab.ml.qlib]
    D --&gt; E[預測持倉權重]
    E --&gt; F[回測&lt;br/&gt;finlab.backtest.sim]
    F --&gt; G{績效是否滿意?}
    G --&gt;|否| H[調整特徵或模型]
    H --&gt; B
    G --&gt;|是| I[執行深度分析]
    I --&gt; J[樣本外測試]
    J --&gt; K{通過驗證?}
    K --&gt;|否| H
    K --&gt;|是| L[部署實盤]

    style B fill:#e1f5ff
    style D fill:#fff4e1
    style I fill:#e8f5e9
    style L fill:#fce4ec</code></pre>
<h3 id="4">流程 4: 實盤交易</h3>
<p>從回測到實盤交易的完整流程:</p>
<pre class="mermaid"><code>sequenceDiagram
    participant User as 使用者
    participant Report as Report 物件
    participant Account as Account 物件
    participant Executor as OrderExecutor
    participant Broker as 券商 API

    User-&gt;&gt;Report: report.upload(name)
    Report--&gt;&gt;User: 上傳成功
    User-&gt;&gt;Report: report.position_info()
    Report--&gt;&gt;User: 持股清單
    User-&gt;&gt;Account: 設定券商帳戶
    Account--&gt;&gt;User: 連線成功
    User-&gt;&gt;Executor: OrderExecutor(report, account)
    Executor-&gt;&gt;Executor: 計算買賣清單
    User-&gt;&gt;Executor: executor.execute()
    Executor-&gt;&gt;Broker: 發送買單
    Broker--&gt;&gt;Executor: 買單回報
    Executor-&gt;&gt;Broker: 發送賣單
    Broker--&gt;&gt;Executor: 賣單回報
    Executor--&gt;&gt;User: 執行完成
    User-&gt;&gt;Account: 查詢部位
    Account-&gt;&gt;Broker: 取得部位資訊
    Broker--&gt;&gt;Account: 部位資料
    Account--&gt;&gt;User: 顯示實盤持股</code></pre>
<hr />
<h2 id="_3">模組功能對照表</h2>
<table>
<thead>
<tr>
<th>模組</th>
<th>主要類別/函數</th>
<th>用途</th>
<th>依賴模組</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>finlab.data</strong></td>
<td><code>get()</code></td>
<td>從資料庫取得財經資料</td>
<td>(無)</td>
</tr>
<tr>
<td><strong>finlab.dataframe</strong></td>
<td><code>FinlabDataFrame</code></td>
<td>增強版 DataFrame,支援金融運算</td>
<td>pandas</td>
</tr>
<tr>
<td><strong>finlab.backtest</strong></td>
<td><code>sim()</code></td>
<td>回測引擎,模擬交易</td>
<td>data, dataframe, market</td>
</tr>
<tr>
<td><strong>finlab.report</strong></td>
<td><code>Report</code></td>
<td>回測報告,績效分析</td>
<td>backtest</td>
</tr>
<tr>
<td><strong>finlab.optimize</strong></td>
<td><code>sim_conditions()</code>, <code>ReportCollection</code></td>
<td>測試多個條件組合</td>
<td>backtest</td>
</tr>
<tr>
<td><strong>finlab.analysis</strong></td>
<td><code>LiquidityAnalysis</code>, <code>MaeMfeAnalysis</code>, 等</td>
<td>深度策略分析</td>
<td>report</td>
</tr>
<tr>
<td><strong>finlab.market</strong></td>
<td><code>Market</code>, <code>TWMarket</code>, <code>USMarket</code></td>
<td>市場資料與特性</td>
<td>data</td>
</tr>
<tr>
<td><strong>finlab.ml.feature</strong></td>
<td><code>add_ta()</code>, <code>add_fundamental()</code></td>
<td>機器學習特徵工程</td>
<td>data</td>
</tr>
<tr>
<td><strong>finlab.ml.label</strong></td>
<td><code>cls_label()</code>, <code>reg_label()</code></td>
<td>機器學習標籤生成</td>
<td>data</td>
</tr>
<tr>
<td><strong>finlab.ml.qlib</strong></td>
<td><code>train()</code></td>
<td>模型訓練</td>
<td>ml.feature, ml.label</td>
</tr>
<tr>
<td><strong>finlab.portfolio</strong></td>
<td><code>Portfolio</code>, <code>PortfolioSyncManager</code></td>
<td>多策略組合管理</td>
<td>report</td>
</tr>
<tr>
<td><strong>finlab.online</strong></td>
<td><code>OrderExecutor</code>, <code>SinopacAccount</code></td>
<td>實盤交易執行</td>
<td>report, portfolio</td>
</tr>
<tr>
<td><strong>finlab.plot</strong></td>
<td><code>plot_creturns()</code>, <code>plot_heatmap()</code></td>
<td>資料視覺化</td>
<td>dataframe</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_4">資料流向圖</h2>
<p>從資料來源到實盤交易的完整資料流:</p>
<pre class="mermaid"><code>flowchart LR
    A[資料來源&lt;br/&gt;GCS/BigQuery] --&gt; B[finlab.data.get]
    B --&gt; C[DataFrame]
    C --&gt; D{用途?}

    D --&gt;|技術指標| E[FinlabDataFrame&lt;br/&gt;運算方法]
    D --&gt;|機器學習| F[ml.feature&lt;br/&gt;特徵工程]

    E --&gt; G[產生訊號&lt;br/&gt;bool DataFrame]
    F --&gt; H[ml.label&lt;br/&gt;標籤生成]
    H --&gt; I[ml.qlib&lt;br/&gt;模型訓練]
    I --&gt; J[預測權重&lt;br/&gt;float DataFrame]

    G --&gt; K[finlab.backtest.sim]
    J --&gt; K

    K --&gt; L[Report 物件]
    L --&gt; M{分析類型?}

    M --&gt;|參數優化| N[optimize.sim_conditions]
    M --&gt;|深度分析| O[analysis 模組]
    M --&gt;|視覺化| P[plot 模組]
    M --&gt;|實盤交易| Q[online.OrderExecutor]

    N --&gt; L
    O --&gt; R[分析報告]
    P --&gt; S[互動式圖表]
    Q --&gt; T[券商 API]
    T --&gt; U[實盤部位]

    style B fill:#e1f5ff
    style K fill:#fff4e1
    style O fill:#e8f5e9
    style Q fill:#fce4ec</code></pre>
<hr />
<h2 id="_5">類別繼承關係</h2>
<h3 id="market">Market 繼承樹</h3>
<pre class="mermaid"><code>classDiagram
    class Market {
        &lt;&lt;abstract&gt;&gt;
        +get_name() str
        +get_freq() str
        +get_price() DataFrame
        +get_benchmark() Series
        +get_asset_id_to_name() dict
    }

    class TWMarket {
        +get_name() "tw_stock"
        +get_benchmark() 加權指數
        +get_industry() dict
        +market_close_at_timestamp()
    }

    class USMarket {
        +get_name() "us_stock"
        +get_benchmark() S&amp;P 500
        +market_close_at_timestamp()
    }

    class ROTCMarket {
        +get_name() "rotc_stock"
    }

    class CustomMarket {
        +get_name() "custom"
        +自訂資料來源
    }

    Market &lt;|-- TWMarket
    Market &lt;|-- USMarket
    Market &lt;|-- ROTCMarket
    Market &lt;|-- CustomMarket</code></pre>
<h3 id="analysis">Analysis 繼承樹</h3>
<pre class="mermaid"><code>classDiagram
    class Analysis {
        &lt;&lt;abstract&gt;&gt;
        +calculate_trade_info() list
        +analyze() dict
        +display() Figure
        +is_market_supported() bool
    }

    class LiquidityAnalysis {
        +流動性風險檢測
        +漲跌停、成交量
    }

    class MaeMfeAnalysis {
        +波動分析
        +MAE/MFE 12 子圖
    }

    class PeriodStatsAnalysis {
        +時期穩定性
        +年度、月度表現
    }

    class InequalityAnalysis {
        +不等式因子
        +基尼係數
    }

    class AlphaBetaAnalysis {
        +Alpha/Beta 分析
    }

    class DrawdownAnalysis {
        +回撤分析
    }

    class CustomAnalysis {
        +自訂分析邏輯
    }

    Analysis &lt;|-- LiquidityAnalysis
    Analysis &lt;|-- MaeMfeAnalysis
    Analysis &lt;|-- PeriodStatsAnalysis
    Analysis &lt;|-- InequalityAnalysis
    Analysis &lt;|-- AlphaBetaAnalysis
    Analysis &lt;|-- DrawdownAnalysis
    Analysis &lt;|-- CustomAnalysis</code></pre>
<h3 id="finlabdataframe">FinlabDataFrame 繼承關係</h3>
<pre class="mermaid"><code>classDiagram
    class DataFrame {
        &lt;&lt;pandas&gt;&gt;
        +基本 DataFrame 功能
    }

    class FinlabDataFrame {
        +average() 移動平均
        +is_largest() 排名
        +is_smallest() 排名
        +quantile() 分位數
        +hold_until() 進出場語法糖
        +and_then() 組合邏輯
    }

    DataFrame &lt;|-- FinlabDataFrame</code></pre>
<hr />
<h2 id="_6">使用建議</h2>
<h3 id="_7">新手學習路徑</h3>
<pre class="mermaid"><code>flowchart TD
    A[開始] --&gt; B[學習 finlab.data&lt;br/&gt;資料存取]
    B --&gt; C[學習 FinlabDataFrame&lt;br/&gt;指標計算]
    C --&gt; D[學習 finlab.backtest&lt;br/&gt;基礎回測]
    D --&gt; E[學習 Report 物件&lt;br/&gt;績效分析]
    E --&gt; F{想要深入?}
    F --&gt;|是| G[學習 finlab.analysis&lt;br/&gt;深度分析]
    F --&gt;|否| K[開始實盤交易&lt;br/&gt;finlab.online]
    G --&gt; H[學習 finlab.optimize&lt;br/&gt;參數優化]
    H --&gt; I[學習完整工作流程]
    I --&gt; J{想用機器學習?}
    J --&gt;|是| L[學習 finlab.ml&lt;br/&gt;機器學習模組]
    J --&gt;|否| K
    L --&gt; K
    K --&gt; M[精通!]

    style A fill:#e1f5ff
    style D fill:#fff4e1
    style G fill:#e8f5e9
    style K fill:#fce4ec
    style M fill:#c8e6c9</code></pre>
<h3 id="_8">進階開發路徑</h3>
<pre class="mermaid"><code>flowchart TD
    A[熟悉基礎回測] --&gt; B{開發需求?}
    B --&gt;|多策略組合| C[學習 finlab.portfolio&lt;br/&gt;組合管理]
    B --&gt;|自訂市場| D[繼承 Market 類別&lt;br/&gt;開發自訂市場]
    B --&gt;|自訂分析| E[繼承 Analysis 類別&lt;br/&gt;開發分析模組]
    B --&gt;|機器學習| F[學習 finlab.ml&lt;br/&gt;特徵、標籤、模型]
    C --&gt; G[多策略實盤]
    D --&gt; H[回測海外市場/加密貨幣]
    E --&gt; I[客製化分析報告]
    F --&gt; J[機器學習策略]
    G --&gt; K[進階應用]
    H --&gt; K
    I --&gt; K
    J --&gt; K

    style A fill:#e1f5ff
    style B fill:#fff4e1
    style K fill:#c8e6c9</code></pre>
<hr />
<h2 id="_9">模組間的資料交換格式</h2>
<h3 id="_10">主要資料格式</h3>
<table>
<thead>
<tr>
<th>資料類型</th>
<th>格式</th>
<th>說明</th>
<th>範例</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>價格資料</strong></td>
<td><code>pd.DataFrame</code></td>
<td>index: 日期, columns: 股票代號</td>
<td><code>data.get('price:收盤價')</code></td>
</tr>
<tr>
<td><strong>選股訊號</strong></td>
<td><code>pd.DataFrame(bool)</code></td>
<td>True 代表買入, False 代表不持有</td>
<td><code>close &gt; ma20</code></td>
</tr>
<tr>
<td><strong>持倉權重</strong></td>
<td><code>pd.DataFrame(float)</code></td>
<td>0-1 之間,代表持倉比例</td>
<td>ML 模型預測</td>
</tr>
<tr>
<td><strong>交易記錄</strong></td>
<td><code>pd.DataFrame</code></td>
<td>逐筆交易的詳細資訊</td>
<td><code>report.get_trades()</code></td>
</tr>
<tr>
<td><strong>績效指標</strong></td>
<td><code>dict</code></td>
<td>策略的各種統計指標</td>
<td><code>report.get_stats()</code></td>
</tr>
<tr>
<td><strong>對照指數</strong></td>
<td><code>pd.Series</code></td>
<td>時間序列的價格資料</td>
<td><code>TWMarket.get_benchmark()</code></td>
</tr>
</tbody>
</table>
<h3 id="_11">訊號轉換流程</h3>
<pre class="mermaid"><code>flowchart LR
    A[條件判斷&lt;br/&gt;close &gt; ma20] --&gt; B[bool DataFrame&lt;br/&gt;True/False]
    B --&gt; C{是否需要出場邏輯?}
    C --&gt;|是| D[hold_until&lt;br/&gt;加入出場條件]
    C --&gt;|否| E[直接作為 position]
    D --&gt; E
    E --&gt; F[finlab.backtest.sim&lt;br/&gt;執行回測]
    F --&gt; G[Report 物件&lt;br/&gt;包含績效與交易]

    style B fill:#e1f5ff
    style D fill:#fff4e1
    style F fill:#e8f5e9</code></pre>
<hr />
<h2 id="_12">常見使用模式</h2>
<h3 id="1_1">模式 1: 快速驗證策略構想</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># 最簡流程</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">close</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;price:收盤價&#39;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">position</span> <span class="o">=</span> <span class="n">close</span> <span class="o">&gt;</span> <span class="n">close</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">report</span> <span class="o">=</span> <span class="n">sim</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">resample</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">report</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
</code></pre></div>
<h3 id="2_1">模式 2: 完整策略開發</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># 完整流程</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">data</span> <span class="err">→</span> <span class="n">指標計算</span> <span class="err">→</span> <span class="n">產生訊號</span> <span class="err">→</span> <span class="n">參數優化</span> <span class="err">→</span> <span class="n">深度分析</span> <span class="err">→</span> <span class="n">樣本外測試</span> <span class="err">→</span> <span class="n">實盤交易</span>
</code></pre></div>
<h3 id="3_1">模式 3: 機器學習策略</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># ML 流程</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">data</span> <span class="err">→</span> <span class="n">feature</span> <span class="n">engineering</span> <span class="err">→</span> <span class="n">label</span> <span class="n">generation</span> <span class="err">→</span> <span class="n">model</span> <span class="n">training</span> <span class="err">→</span> <span class="n">預測</span> <span class="err">→</span> <span class="n">回測</span> <span class="err">→</span> <span class="n">分析</span>
</code></pre></div>
<h3 id="4_1">模式 4: 多策略組合</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># 組合流程</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">策略</span> <span class="n">A</span> <span class="n">report</span> <span class="err">→</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">策略</span> <span class="n">B</span> <span class="n">report</span> <span class="err">→</span>  <span class="n">Portfolio</span> <span class="err">→</span> <span class="n">PortfolioSyncManager</span> <span class="err">→</span> <span class="n">實盤多策略</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">策略</span> <span class="n">C</span> <span class="n">report</span> <span class="err">→</span>
</code></pre></div>
<hr />
<h2 id="_13">效能優化建議</h2>
<h3 id="_14">資料存取</h3>
<pre class="mermaid"><code>flowchart TD
    A[需要使用資料] --&gt; B{資料量大小?}
    B --&gt;|小&lt;br/&gt;單一股票| C[直接使用 data.get]
    B --&gt;|中&lt;br/&gt;數十個指標| D[一次載入&lt;br/&gt;避免重複呼叫]
    B --&gt;|大&lt;br/&gt;大量回測| E[考慮使用&lt;br/&gt;本地快取]

    C --&gt; F[執行策略邏輯]
    D --&gt; F
    E --&gt; F

    style C fill:#e8f5e9
    style E fill:#fff4e1</code></pre>
<h3 id="_15">回測優化</h3>
<table>
<thead>
<tr>
<th>瓶頸</th>
<th>優化方法</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>條件組合過多</strong></td>
<td>先用單一條件篩選,移除差的條件</td>
</tr>
<tr>
<td><strong>資料範圍過大</strong></td>
<td>縮短回測區間或增加 resample 週期</td>
</tr>
<tr>
<td><strong>計算複雜度高</strong></td>
<td>使用向量化運算,避免迴圈</td>
</tr>
<tr>
<td><strong>記憶體不足</strong></td>
<td>分批處理或使用更長的 resample</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="_16">參考資源</h2>
<h3 id="_17">詳細文檔</h3>
<ul>
<li><a href="/details/optimize_strategy/">策略參數優化完整指南</a></li>
<li><a href="/details/analysis_modules/">策略分析模組完整指南</a></li>
<li><a href="/details/market_customization/">自訂市場物件完整指南</a></li>
<li><a href="/workflows/complete_strategy_workflow/">完整策略開發流程</a></li>
</ul>
<h3 id="api-reference">API Reference</h3>
<ul>
<li><a href="/reference/data/">finlab.data API Reference</a></li>
<li><a href="/reference/backtest/">finlab.backtest API Reference</a></li>
<li><a href="/reference/optimize/">finlab.optimize API Reference</a></li>
<li><a href="/reference/analysis/">finlab.analysis API Reference</a></li>
<li><a href="/reference/market/">finlab.market API Reference</a></li>
</ul>
<h3 id="_18">實用範例</h3>
<ul>
<li><a href="https://doc.finlab.tw/example/">台股實用範例</a></li>
<li><a href="https://github.com/finlab-python/finlab">FinLab GitHub</a></li>
</ul>







  
  



  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到頂端
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u8907\u88fd", "clipboard.copy": "\u8907\u88fd", "search.result.more.one": "\u6b64\u9801\u5c1a\u6709 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.more.other": "\u6b64\u9801\u5c1a\u6709 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.none": "\u6c92\u6709\u7b26\u5408\u7684\u9805\u76ee", "search.result.one": "\u627e\u5230 1 \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.other": "\u627e\u5230 # \u500b\u7b26\u5408\u7684\u9805\u76ee", "search.result.placeholder": "\u6253\u5b57\u9032\u884c\u641c\u5c0b", "search.result.term.missing": "\u7f3a\u5c11\u5b57\u8a5e", "select.version": "\u9078\u64c7\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../javascripts/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>